!function(i){void 0===window.UM&&(window.UM={}),UM.modal={addModal:function(o,t){t=UM.modal.getOptions(t),UM.modal.isValidHttpUrl(o)&&(t.load=o,o="loading"),"loading"===o&&(o='<div class="loading"></div>');var d=UM.modal.getTemplate(t);d.on("touchmove",UM.modal.handler.stopEvent),d.find(".um-modal-body").append(o),UM.modal.addOverlay().after(d),"string"==typeof t.load&&t.load&&d.find(".um-modal-body").load(t.load,function(){UM.modal.responsive(d)});o=d.find(".um-photo img");o.length&&o.on("load",function(){UM.modal.responsive(d)});o=d.find(".um-single-image-upload");o.length&&initImageUpload_UM(o);o=d.find(".um-single-file-upload");return o.length&&initFileUpload_UM(o),UM.modal.initTipsy(),UM.modal.responsive(d),d.animate({opacity:1},t.duration),d},addOverlay:function(){return i("body > .um-modal-overlay").length<1&&i(document.body).addClass("um-overflow-hidden").append('<div class="um-modal-overlay"></div>').on("touchmove",UM.modal.handler.stopEvent),i("body > .um-modal-overlay")},clear:function(o){o=UM.modal.getModal(o);o&&("function"==typeof i.fn.cropper&&o.find("img.cropper-hidden").cropper("destroy"),o.find(".tipsy").remove(),o.find('div[id^="um_"]').hide().appendTo("body"),i(document.body).removeClass("um-overflow-hidden").off("touchmove").children(".um-modal-overlay, .um-modal").remove(),"hidden"===i(document.body).css("overflow-y")&&i(document.body).css("overflow-y","visible"))},getModal:function(o){o=void 0===o?i(".um-modal:visible").not(".um-modal-hidden"):i(o);return o.length?o.last():null},getOptions:function(o){var t=wp.hooks.applyFilters("modalDefOptions",{id:null,attr:{},class:"large",closeButton:!1,duration:400,header:"",buttons:[],type:"body",load:null});return i.extend(t,o||{})},getTemplate:function(o){var t,d='<div class="um-modal '+(o=UM.modal.getOptions(o)).class+'"';for(t in o.id&&(d+=' id="'+o.id+'"'),o.attr)d+=" "+t+'="'+o.attr[t]+'"';switch(d+=">",d+=o.header?'<div class="um-modal-header">'+o.header+"</div>":"",o.closeButton&&(d+='<span data-action="um_remove_modal" class="um-modal-close" aria-label="Close view photo modal"><i class="um-faicon-times"></i></span>'),o.type){default:case"body":d+='<div class="um-modal-body"></div>';break;case"photo":d+='<div class="um-modal-body um-photo"></div>';break;case"popup":d+='<div class="um-modal-body um-popup"></div>'}return o.buttons.length&&(d+='<div class="um-modal-footer">',i.each(o.buttons,function(o,t){void 0!==t.href&&t.href?d+='<a href="'+t.href+'" class="'+t.class+'" '+t.attr+">"+t.title+"</a>":d+='<button class="'+t.class+'" '+t.attr+">"+t.title+"</button>"}),d+="</div>"),i(d+="</div>")},handler:{open:function(o){var t=i(o.currentTarget),o={};t.is("[data-modal-size]")&&(o.class=t.attr("data-modal-size")),t.is("[data-modal-header]")&&(o.header=t.attr("data-modal-header")),t.is("[data-modal-content]")&&(t=t.data("modal-content"),UM.modal.isValidHttpUrl(t)?o.load=t:t=i(t).html(),UM.modal.addModal(t,o))},stopEvent:function(o){o.preventDefault(),o.stopPropagation()}},initTipsy:function(){"function"==typeof i.fn.tipsy&&("function"==typeof init_tipsy?init_tipsy():(jQuery(".um-tip-n").tipsy({gravity:"n",opacity:1,offset:3}),jQuery(".um-tip-w").tipsy({gravity:"w",opacity:1,offset:3}),jQuery(".um-tip-e").tipsy({gravity:"e",opacity:1,offset:3}),jQuery(".um-tip-s").tipsy({gravity:"s",opacity:1,offset:3})))},isValidHttpUrl:function(o){let t;try{t=new URL(o)}catch(o){return!1}return"http:"===t.protocol||"https:"===t.protocol},newModal:function(o,t,d,a){UM.modal.clear(),UM.dropdown.hideAll();var e=i("#"+o),o={attr:{},class:""},a=d&&a?'<img src="'+a+'" />':e.find(".um-modal-body").length?e.find(".um-modal-body").children():e;return t&&(o.class=t),d?(o.class+=" is-photo",o.closeButton=!0,o.type="photo"):o.class+=" no-photo",e.is("[id]")&&(o.id=e.attr("id")),e.is("[data-user_id]")?o.attr["data-user_id"]=e.attr("data-user_id"):e.find("[data-user_id]").length&&(o.attr["data-user_id"]=e.find("[data-user_id]").attr("data-user_id")),e.find(".um-modal-header").length&&(o.header=e.find(".um-modal-header").text().trim()),UM.modal.addModal(a,o)},responsive:function(o){var t,d,a,e=UM.modal.getModal(o);e&&(e.removeClass("uimob340").removeClass("uimob500"),t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,(o=i(".um-modal-body.um-photo img:visible")).length?(o.css({"max-height":.8*d,"max-width":.8*t}),e.css({width:o.width(),"margin-left":"-"+o.width()/2+"px"}),a=(d-e.innerHeight())/2+"px"):(t<=340?(a=0,e.addClass("uimob340")):t<=500?(a=0,e.addClass("uimob500")):(t<=800||t<=960||960<t)&&(a=(d-e.innerHeight())/2+"px"),initCrop_UM()),e.css({bottom:a,maxHeight:d}))},setContent:function(o,t){t=UM.modal.getModal(t);t.find(".um-modal-body").html(o),UM.modal.responsive(t)}},i(document.body).on("click","[data-modal-content]",UM.modal.handler.open).on("click",'.um-modal-overlay, [data-action="um_remove_modal"]',UM.modal.clear),i.fn.umModal=function(o){UM.modal.addModal(this.clone(),o)}}(jQuery);