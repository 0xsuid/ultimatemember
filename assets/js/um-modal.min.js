!function(s){function t(){this.M=[]}t.prototype={constructor:t,addModal:function(t,e){e=this.getOptions(e),this.isValidHttpUrl(t)&&(e.load=t,t="loading"),"loading"===t&&(t='<div class="loading"></div>');let o=this.getTemplate(e);o.on("touchmove",this.stopEvent),o.find(".um-modal-body").append(t);var i=this;"string"==typeof e.load&&e.load&&o.find(".um-modal-body").load(e.load,function(){i.responsive(o)});let a=o.find(".um-photo img");a.length&&a.on("load",function(){i.responsive(o)});t=o.find(".um-single-image-upload");t.length&&initImageUpload_UM(t);t=o.find(".um-single-file-upload");return t.length&&initFileUpload_UM(t),"function"==typeof s.fn.tipsy&&("function"==typeof init_tipsy?init_tipsy():(jQuery(".um-tip-n").tipsy({gravity:"n",opacity:1,offset:3}),jQuery(".um-tip-w").tipsy({gravity:"w",opacity:1,offset:3}),jQuery(".um-tip-e").tipsy({gravity:"e",opacity:1,offset:3}),jQuery(".um-tip-s").tipsy({gravity:"s",opacity:1,offset:3}))),this.hide(),this.M.push(o),this.show(o,e.duration),o},addOverlay:function(){return s("body > .um-modal-overlay").length<1&&s(document.body).addClass("um-overflow-hidden").append('<div class="um-modal-overlay"></div>').on("touchmove",this.stopEvent),s("body > .um-modal-overlay")},clear:function(){this.M=[],s(document.body).removeClass("um-overflow-hidden").off("touchmove").children(".um-modal-overlay, .um-modal").remove(),"hidden"===s(document.body).css("overflow-y")&&s(document.body).css("overflow-y","visible")},close:function(){let e=this.getModal();if(e){let t=e.find("div.um-admin-editor:visible");0<t.length&&("object"==typeof tinyMCE&&tinyMCE.triggerSave(),"object"==typeof $um_tiny_editor&&s("div.um_tiny_placeholder:empty").replaceWith($um_tiny_editor.html()),t.find("#wp-um_editor_edit-wrap").remove())}1<this.M.length?(this.M.pop().remove(),this.addOverlay().after(this.getModal())):this.clear()},getModal:function(o){let i;return"object"==typeof o?i=s(o):"string"==typeof o&&1<=this.M.length?s.each(this.M,function(t,e){e.is(o)&&(i=e)}):i=1<=this.M.length?this.M[this.M.length-1]:s("div.um-modal:not(.um-modal-hidden)").filter(":visible"),i.length?i.last():null},getOptions:function(t){var e=wp.hooks.applyFilters("um-modal-def-options",{id:null,attr:{},class:"large",closeButton:!1,duration:400,header:"",buttons:[],type:"body",load:null});return s.extend(e,t||{})},getTemplate:function(t){let o='<div class="um-modal '+(t=this.getOptions(t)).class+'"';for(var e in t.id&&(o+=' id="'+t.id+'"'),t.attr)o+=" "+e+'="'+t.attr[e]+'"';switch(o+=">",t.closeButton&&(o+='<span data-action="um_remove_modal" class="um-modal-close" aria-label="Close view photo modal"><i class="um-faicon-times"></i></span>'),o+=t.header?'<div class="um-modal-header">'+t.header+"</div>":"",t.type){default:case"body":o+='<div class="um-modal-body"></div>';break;case"photo":o+='<div class="um-modal-body um-photo"></div>';break;case"popup":o+='<div class="um-modal-body um-popup"></div>'}return t.buttons.length&&(o+='<div class="um-modal-footer">',s.each(t.buttons,function(t,e){o+=s(e).addClass("um-modal-btn").prop("outerHTML")}),o+="</div>"),o+="</div>",s(o)},hide:function(t){let e=this.getModal(t);if(e)return e.detach(),e},isValidHttpUrl:function(t){let e;try{e=new URL(t)}catch(t){return!1}return"http:"===e.protocol||"https:"===e.protocol},newModal:function(t,e,o,i,a){this.hide(),UM.dropdown.hideAll(),s(".tipsy").hide();let d=s("#"+t),n,l={attr:{},class:"",id:t};return n=i?'<img src="'+i+'" />':(d.find(".um-modal-body").length?d.find(".um-modal-body"):d.clone()).children(),e&&(l.class=e),a&&(l.class+=" um-admin-modal",l.closeButton=!0),!0!==o||i||(l.class+=" loading",l.type="popup"),i&&(l.class+=" is-photo",l.closeButton=!0,l.type="photo"),d.is("[data-user_id]")?l.attr["data-user_id"]=d.attr("data-user_id"):d.find("[data-user_id]").length&&(l.attr["data-user_id"]=d.find("[data-user_id]").attr("data-user_id")),d.find(".um-modal-header").length&&(l.header=d.find(".um-modal-header").text().trim()),this.addModal(n,l)},open:function(t){let i=s(t),e=null,o="normal",a=!1,d=!1;i.data("modal")&&(e=i.data("modal")),i.data("modal-size")&&(o=i.data("modal-size")),i.data("dynamic-content")&&(a=!0),s(document.body).is(".wp-admin")&&(d=!0);let n=jQuery("#"+e);if(n.length<1&&(n=jQuery(e)),0<n.length&&i.data("modal-copy")){let t,e,o=i.parents(".um-field").find(".um-modal-hidden-content");0<o.length&&n.html(o),i.parents("[data-user_id]").length?e=i.parents("[data-user_id]").data("user_id"):0<jQuery('input[type="hidden"][name="user_id"]').length&&(e=jQuery('input[type="hidden"][name="user_id"]').val()),e&&n.attr("data-user_id",e),i.parents("[data-ratio]").length&&(t=i.parents("[data-ratio]").data("ratio"),n.attr("data-ratio",t))}0<n.length&&i.data("back")&&n.find("a.um-admin-modal-back").attr("data-modal",i.data("back"));var l=this.newModal(e,o,a,null,d),t=wp.hooks.applyFilters("um-modal-ajax",null,l,i,i.data());return wp.hooks.doAction("um-modal-shown",l,i,i.data(),t),l},responsive:function(o){let i=this.getModal(o);if(i){i.removeClass("uimob340").removeClass("uimob500");var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let t=s(".um-modal-body.um-photo img").filter(":visible"),e={};t.length?(t.css({maxHeight:.8*o,maxWidth:.8*a}),e.bottom=(o-i.innerHeight())/2+"px",e.marginLeft="-"+t.width()/2+"px",e.width=t.width()):(a<=340?(e.bottom=0,e.height=o,e.width=a,i.addClass("uimob340")):a<=500?(e.bottom=0,e.height=o,e.width=a,i.addClass("uimob500")):a<=800?(e.bottom=(o-i.innerHeight())/2+"px",e.maxHeight=o,i.addClass("uimob800"),e.maxHeight=o):a<=960?(e.bottom=(o-i.innerHeight())/2+"px",e.maxHeight=o,i.addClass("uimob960")):960<a&&(e.bottom=(o-i.innerHeight())/2+"px",e.maxHeight=o),i.width()>a&&(e.width=.8*a,e.marginLeft="-"+e.width/2+"px"),"function"==typeof initCrop_UM&&initCrop_UM()),i.css(e)}},setContent:function(t,e){let o=this.getModal(e);o.find(".um-modal-body").html(t),this.responsive(o)},show:function(t,e){let o=this.getModal(t);if(o)return this.addOverlay().after(o),this.responsive(o),o.animate({opacity:1},e||10),o},stopEvent:function(t){t.preventDefault(),t.stopPropagation()}},void 0===window.UM&&(window.UM={}),UM.modal=new t,s(document.body).on("click",'[data-modal^="um_"], [data-modal^="UM_"]',function(t){return t.preventDefault(),!s(t.currentTarget).is(".um-admin-modal-back")&&void UM.modal.open(t.currentTarget)}).on("click",'.um-modal-overlay, [data-action="um_remove_modal"]',function(t){t.preventDefault(),UM.modal.close()}),s.fn.umModal=function(t){UM.modal.addModal(this.clone(),t)}}(jQuery);